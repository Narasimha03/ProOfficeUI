angular.module("office_erp",["ui.router","720kb.datepicker","ngDialog"]).run(function($rootScope,$state){$rootScope.loginPage=false;$rootScope.$on("$stateChangeStart",function(event,toState,toParams){var requireLogin=toState.data.requireLogin;if(requireLogin!=null){return $state.go("main.client")}})});angular.module("office_erp").config(function($stateProvider,$urlRouterProvider,$locationProvider){$stateProvider.state("main",{url:"/",views:{"":{templateUrl:"app/components/shared/main.html"},"header@main":{templateUrl:"app/components/shared/header.html"},"sidebar@main":{templateUrl:"app/components/shared/sidebar.html"},"footer@main":{templateUrl:"app/components/shared/footer.html"}},data:{requireLogin:true}}).state("main.dashboard",{url:"dashboard",templateUrl:"app/components/dashboard/dashboard.html",controller:"dashboardController",data:{requireLogin:true}}).state("main.team",{url:"team",templateUrl:"app/components/team/team.html",controller:"addTeamController",data:{requireLogin:true}}).state("main.client",{url:"client",templateUrl:"app/components/client/client.html",controller:"addClientController",data:{requireLogin:true}}).state("main.project",{url:"project",templateUrl:"app/components/project/projects.html",controller:"addProjectController",data:{requireLogin:true}}).state("main.todolist",{url:"todolist",templateUrl:"app/components/todolist/todolist.html",controller:"addTodolistController",data:{requireLogin:true}}).state("main.task",{url:"task",templateUrl:"app/components/task/task.html",controller:"addTaskController",data:{requireLogin:true}}).state("main.issue",{url:"issue",templateUrl:"app/components/issue/issues.html",controller:"addIssueController",data:{requireLogin:true}}).state("main.discussion",{url:"discussion",templateUrl:"app/components/discussion/discussions.html",controller:"addDiscussionController",data:{requireLogin:true}}).state("main.articles",{url:"articles",templateUrl:"app/components/articles/articles.html",controller:"addArticleController",data:{requireLogin:true}}).state("main.events",{url:"events",templateUrl:"app/components/events/events.html",controller:"addEventsController",data:{requireLogin:true}});$urlRouterProvider.otherwise("team")});angular.module("office_erp").controller("addArticleController",["$http","$scope","$filter","addArcticleServices","globalServices","ngDialog",function($http,$scope,$filter,addArcticleServices,globalServices,ngDialog){$scope.hideForm=false;$scope.commentData=[];$scope.articleData=[];$scope.getSendArticle=function(){addArcticleServices.getSendArticle().success(function(data,status){$scope.articleData=data.articles;console.log("message");$scope.article_id=$scope.articleData[0].article_id;console.log($scope.article_id);$scope.getSendArticleById($scope.article_id)}).error(function(data,success){})};$scope.getSendArticleById=function(article_id){addArcticleServices.getSendArticleById(article_id).success(function(data,status){console.log("message........2222");console.log(JSON.stringify(data));$scope.articleData=data.articles;$scope.article_id=$scope.articleData[0].article_id}).error(function(data,success){})};$scope.addSendArticle=function(data){$scope.hideForm=true;var articleDetails={article:$scope.data.send_articles,date:(new Date).toDateString(),time:$filter("date")(new Date,"HH:mm")};addArcticleServices.setSendArticle(articleDetails).success(function(data,status){ngDialog.open({template:"<p>Article is Sended Successfully.</p>",plain:true});$scope.data=[];$scope.getSendArticle()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getSendComment=function(){addArcticleServices.getSendComment().success(function(data,status){$scope.commentData=data.comment;console.log(JSON.stringify(data))}).error(function(data,success){})};$scope.addSendComment=function(dataValue){console.log(dataValue);var commentDetails={comment:dataValue,date:(new Date).toDateString(),time:$filter("date")(new Date,"HH:mm")};console.log(commentDetails);addArcticleServices.setSendComment(commentDetails).success(function(data,status){ngDialog.open({template:"<p>Comment is Sended Successfully.</p>",plain:true});$scope.data=[];$scope.getSendComment()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getSendArticle();$scope.getSendComment()}]);angular.module("office_erp").factory("addArcticleServices",["$http","globalServices",function($http,globalServices){var addArcticleServices={};addArcticleServices.getSendArticle=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/article"})};addArcticleServices.getSendArticleById=function(article_id){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/article/"+article_id})};addArcticleServices.setSendArticle=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"/api/article",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};addArcticleServices.getSendComment=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/articles/comments"})};addArcticleServices.setSendComment=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"/api/articles/comments",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return addArcticleServices}]);angular.module("office_erp").controller("addClientController",["$http","$scope","addClientServices","ngDialog",function($http,$scope,addClientServices,ngDialog){$scope.isDisabled=false;$scope.disableButton=function(){$scope.isDisabled=true};$scope.data=[];$scope.getClient=function(){addClientServices.getClient().success(function(data,status){$scope.data=data.clients;console.log(JSON.stringify(data));console.log(JSON.stringify(data.clients[0].client_name))}).error(function(data,success){})};$scope.addClient=function(data){var ClientDetails={client_name:$scope.data.client_name,phone:$scope.data.phone,email:$scope.data.email,location:$scope.data.location};addClientServices.setClient(ClientDetails).success(function(data,status){ngDialog.open({template:"<p>Project is Added Successfully.</p>",plain:true});$scope.data=[];$scope.getClient()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getClient()}]);angular.module("office_erp").factory("addClientServices",["$http","globalServices",function($http,globalServices){var addClientServices={};addClientServices.getClient=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/clients"})};addClientServices.setClient=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"/api/clients",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return addClientServices}]);angular.module("office_erp").controller("addDiscusionController",["$http","$scope","addDiscusionServices","ngDialog",function($http,$scope,addDiscusionServices,ngDialog){$scope.isDisabled=false;$scope.disableButton=function(){$scope.isDisabled=true};$scope.data=[];$scope.getDiscussion=function(){addDiscusionServices.getDiscussion().success(function(data,status){$scope.data=data.discussion;console.log(JSON.stringify(data))}).error(function(data,success){})};$scope.addDiscussion=function(data){$scope.DiscussionDetails=false;var DiscussionDetails={subject:$scope.data.subject,topic:$scope.data.topic};addDiscusionServices.setDiscussion(DiscussionDetails).success(function(data,status){ngDialog.open({template:"<p>Project is Added Successfully.</p>",plain:true});$scope.data=[];$scope.getDiscussion()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getDiscussion()}]);angular.module("office_erp").factory("addDiscusionServices",["$http","globalServices",function($http,globalServices){var addDiscusionServices={};addDiscusionServices.getDiscussion=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/discussion"})};addDiscusionServices.setDiscussion=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"/api/discussion",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return addDiscusionServices}]);angular.module("office_erp").controller("addIssueController",["$http","$scope","$filter","globalServices","addProjectServices","addTaskServices","addIssueServices","ngDialog",function($http,$scope,$filter,globalServices,addProjectServices,addTaskServices,addIssueServices,ngDialog){$scope.isDisabled=false;$scope.disableButton=function(){$scope.isDisabled=true};$scope.issueDetails=true;globalServices.getProject().success(function(data,status){$scope.projectData=data.project;console.log(JSON.stringify(data));console.log(JSON.stringify(data.project[0].project_title));$scope.project_id=$scope.projectData[0].project_id;console.log($scope.project_id);$scope.getIssueByProject($scope.project_id)}).error(function(data,success){});addTaskServices.getTask().success(function(data,status){$scope.taskData=data.taskplanner;console.log(JSON.stringify(data))}).error(function(data,success){});$scope.data=[];$scope.getIssue=function(){addIssueServices.getIssue().success(function(data,status){$scope.issueData=data.issue;console.log(JSON.stringify(data))}).error(function(data,success){})};$scope.getIssueByProject=function(project_id){console.log("issue by project");addIssueServices.getIssueByProject(project_id).success(function(data,status){$scope.projectIssue=data.issue_by_projects;console.log(JSON.stringify(data));$scope.issue_id=$scope.projectIssue[0].issue_id;$scope.getIssueById($scope.issue_id)}).error(function(data,success){})};$scope.getIssueById=function(issue_id){console.log("issue by project");addIssueServices.getIssueById(issue_id).success(function(data,status){console.log(JSON.stringify(data));$scope.IssueId=data.issue_by_id;$scope.issue=$scope.IssueId[0].problem;$scope.issue_id=$scope.IssueId[0].issue_id;$scope.getMsg($scope.issue_id);console.log($scope.issue_id)}).error(function(data,success){})};$scope.addIssue=function(data){$scope.IssueDetails=false;var IssueDetails={subject:$scope.data.title,problem:$scope.data.problem,project:$scope.data.project,task:$scope.data.task};addIssueServices.setIssue(IssueDetails).success(function(data,status){ngDialog.open({template:"<p>Issue is Added Successfully.</p>",plain:true});$scope.data=[];$scope.getIssueByProject($scope.project_id)}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.sendMsg=function(data){var msgDetails={send_issues:$scope.data.message,date:(new Date).toDateString(),time:$filter("date")(new Date,"HH:mm")};console.log(msgDetails);console.log($scope.issue_id);addIssueServices.sendMsg(msgDetails,$scope.issue_id).success(function(data,status){ngDialog.open({template:"<p>Message Sended Successfully.</p>",plain:true});$scope.data=[];$scope.getMsg($scope.issue_id)}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getMsg=function(value){console.log("issue by project");addIssueServices.getMsg($scope.issue_id).success(function(data,status){console.log(JSON.stringify(data));$scope.IssueMsg=data.issue_msg}).error(function(data,success){})};$scope.getIssue()}]);angular.module("office_erp").factory("addIssueServices",["$http","globalServices",function($http,globalServices){var addIssueServices={};addIssueServices.getIssue=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/issue"})};addIssueServices.getIssueByProject=function(project_id){console.log(project_id);return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/issue_by_project/"+project_id})};addIssueServices.getIssueById=function(issue_id){console.log(issue_id);return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/issue_by_id/"+issue_id})};addIssueServices.setIssue=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"/api/issue",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};addIssueServices.sendMsg=function(dataValue,issue_id){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"/api/issue/send_issue/"+issue_id,data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};addIssueServices.getMsg=function(issue_id){console.log(issue_id);return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/issue/send_issue/"+issue_id})};return addIssueServices}]);angular.module("office_erp").controller("addProjectController",["$http","$scope","addProjectServices","ngDialog",function($http,$scope,addProjectServices,ngDialog){$scope.isDisabled=false;$scope.disableButton=function(){$scope.isDisabled=true};$scope.data=[];$scope.getProject=function(){addProjectServices.getProject().success(function(data,status){$scope.data=data.project;console.log(JSON.stringify(data));console.log(JSON.stringify(data.project[0].project_title))}).error(function(data,success){})};$scope.addProject=function(data){$scope.ProjectDetails=false;var ProjectDetails={project_title:$scope.data.project_title,client_name:$scope.data.client_name,due_date:$scope.data.due_date};addProjectServices.setProject(ProjectDetails).success(function(data,status){ngDialog.open({template:"<p>Project is Added Successfully.</p>",plain:true});$scope.data=[];$scope.getProject()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getProject()}]);angular.module("office_erp").factory("addProjectServices",["$http","globalServices",function($http,globalServices){var addProjectServices={};addProjectServices.getProject=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/project"})};addProjectServices.setProject=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"/api/project",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return addProjectServices}]);angular.module("office_erp").factory("globalServices",["$http","$rootScope",function($http,$rootScope){var globalServices={};globalServices.globalValue={baseURL:"http://localhost:9101"};globalServices.getProject=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/project"})};globalServices.getTeam=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/team"})};globalServices.getTask=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/taskplanner"})};return globalServices}]);angular.module("office_erp").controller("addTaskController",["$http","$scope","addTaskServices","ngDialog",function($http,$scope,addTaskServices,ngDialog){$scope.isDisabled=false;$scope.disableButton=function(){$scope.isDisabled=true};$scope.data=[];$scope.getTask=function(){addTaskServices.getTask().success(function(data,status){$scope.data=data.taskplanner;console.log(JSON.stringify(data))}).error(function(data,success){})};$scope.addTask=function(data){$scope.TaskDetails=false;var TaskDetails={task:$scope.data.task,description:$scope.data.description,start_date:$scope.data.start_date,end_date:$scope.data.end_date};addTaskServices.setTask(TaskDetails).success(function(data,status){ngDialog.open({template:"<p>Project is Added Successfully.</p>",plain:true});$scope.data=[];$scope.getTask()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getTask()}]);angular.module("office_erp").factory("addTaskServices",["$http","globalServices",function($http,globalServices){var addTaskServices={};addTaskServices.getTask=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/taskplanner"})};addTaskServices.setTask=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"/api/taskplanner",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return addTaskServices}]);angular.module("office_erp").controller("addTeamController",["$http","$scope","addTeamServices","ngDialog",function($http,$scope,addTeamServices,ngDialog){$scope.data=[];$scope.getTeam=function(){addTeamServices.getTeam().success(function(data,status){$scope.data=data.team;console.log(JSON.stringify(data))}).error(function(data,success){})};$scope.addTeam=function(data){var TeamDetails={name:$scope.data.name,email:$scope.data.email,phone:$scope.data.phone,role:$scope.data.role};addTeamServices.setTeam(TeamDetails).success(function(data,status){ngDialog.open({template:"<p>Project is Added Successfully.</p>",plain:true});$scope.data=[];$scope.getTeam()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getTeam()}]);angular.module("office_erp").factory("addTeamServices",["$http","globalServices",function($http,globalServices){var addTeamServices={};addTeamServices.getTeam=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/team"})};addTeamServices.setTeam=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"/api/team",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return addTeamServices}]);angular.module("office_erp").controller("addTodolistController",["$http","$scope","$filter","globalServices","ngDialog",function($http,$scope,$filter,globalServices,ngDialog){$scope.hideForm=false;$scope.data=[];$scope.projectData=[];$scope.getTask=function(){globalServices.getTask().success(function(data,status){$scope.data=data.taskplanner;console.log(JSON.stringify(data))}).error(function(data,success){})};$scope.getProject=function(){globalServices.getProject().success(function(data,status){$scope.projectData=data.project;console.log(JSON.stringify(data));console.log(JSON.stringify(data.project[0].project_title))}).error(function(data,success){})};$scope.getTask();$scope.getProject()}]);